.ControlPanelExpanded {
  position: fixed;
  right: calc(
    var(--control-panel-right-offset) + var(--control-panel-strip-width) +
      var(--control-panel-gap)
  );
  top: var(--control-panel-top-offset);
  z-index: var(--z-control-panel);

  container-type: inline-size;
  container-name: control-panel;
  width: clamp(280px, 30vw, 360px);

  display: flex;
  flex-direction: column;

  background: var(--color-bg-main);
  border: var(--border-size-2) solid var(--color-fg-accent);
  box-shadow: var(--shadow-hard-5);
}

/* Section wrapper for grouped rows */
.ControlPanelExpanded__section {
  display: flex;
  flex-direction: column;
  padding: var(--control-panel-padding);
}

/* Border between sections */
.ControlPanelExpanded__section + .ControlPanelExpanded__section {
  border-top: var(--border-size-2) dashed var(--color-fg-accent);
}

/* Navigation container - two-column layout for routes and sections */
.ControlPanelExpanded__navigation {
  display: grid;
  grid-template-columns: 30cqw minmax(0, 1fr);
  gap: calc(var(--control-panel-gap) / 2);
}

/* Override ControlPanelRow to stack label on top with vertical options */
.ControlPanelExpanded__navigation .ControlPanelRow {
  flex-direction: column;
  align-items: stretch;
}

.ControlPanelExpanded__navigation .ControlPanelRow__label {
  width: auto;
}

.ControlPanelExpanded__navigation .ControlPanelRow__options {
  flex-direction: column;
  max-height: 40vh;
  overflow-y: auto;

  /* Hide scrollbar but keep functionality */
  /* eslint-disable-next-line css/use-baseline */
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE/Edge */
}

.ControlPanelExpanded__navigation .ControlPanelRow__options::-webkit-scrollbar {
  display: none; /* Chrome/Safari/Opera */
}

/* Mobile: stack routes horizontally, sections vertically */
@media (max-width: 767px) {
  .ControlPanelExpanded__navigation {
    display: flex;
    flex-direction: column;
    gap: var(--control-panel-gap);
  }

  /* Routes: horizontal scrollable */
  .ControlPanelExpanded__routes .ControlPanelRow {
    flex-direction: row;
  }

  .ControlPanelExpanded__routes .ControlPanelRow__label {
    width: var(--control-panel-label-width);
  }

  .ControlPanelExpanded__routes .ControlPanelRow__options {
    flex-direction: row;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    flex-wrap: nowrap;

    /* Hide scrollbar but keep functionality */
    /* eslint-disable-next-line css/use-baseline */
    scrollbar-width: none;
    -ms-overflow-style: none;
  }

  .ControlPanelExpanded__routes .ControlPanelRow__options::-webkit-scrollbar {
    display: none;
  }

  /* Sections: vertical scrollable list */
  .ControlPanelExpanded__sections .ControlPanelRow__options {
    align-items: stretch;
    max-height: 35vh;
    overflow-y: auto;
  }
}
