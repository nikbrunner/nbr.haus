---
import styles from "./Project.module.css";

interface Props {
  title: string;
  status: "Active" | "Maintained" | "Complete" | "Archived";
  stack: string[];
  topics: string[];
  primaryLink: {
    url: string;
    type: string;
  };
  year?: string | number;
  platforms?: string[];
  metrics?: Array<{
    label: string;
    value: string;
  }>;
  additionalLinks?: Array<{
    url: string;
    type: string;
  }>;
}

const { title, stack, topics, status, primaryLink, year, platforms, metrics, additionalLinks } = Astro.props;

const allLinks = [primaryLink, ...(additionalLinks || [])];
---

<article class={styles.project}>
  <h3 class={styles.title}>{title}</h3>

  <div class={styles.metadata}>
    <div class={styles.metadataItem}>
      <span class={styles.label}>Status:</span>
      <span class={styles.value}>{status}</span>
    </div>

    {
      stack.length > 0 && (
        <div class={styles.metadataItem}>
          <span class={styles.label}>Stack:</span>
          <div class={styles.tags}>
            {stack.map(tech => (
              <span class={styles.tag}>{tech}</span>
            ))}
          </div>
        </div>
      )
    }

    {
      topics.length > 0 && (
        <div class={styles.metadataItem}>
          <span class={styles.label}>Topics:</span>
          <div class={styles.tags}>
            {topics.map(topic => (
              <span class={styles.tag}>{topic}</span>
            ))}
          </div>
        </div>
      )
    }

    {
      year && (
        <div class={styles.metadataItem}>
          <span class={styles.label}>Year:</span>
          <span class={styles.value}>{year}</span>
        </div>
      )
    }

    {
      platforms && platforms.length > 0 && (
        <div class={styles.metadataItem}>
          <span class={styles.label}>Platforms:</span>
          <span class={styles.value}>{platforms.join(", ")}</span>
        </div>
      )
    }

    {
      metrics && metrics.length > 0 && (
        <>
          {metrics.map(metric => (
            <div class={styles.metadataItem}>
              <span class={styles.label}>{metric.label}:</span>
              <span class={styles.value}>{metric.value}</span>
            </div>
          ))}
        </>
      )
    }
  </div>

  <div class={styles.description}>
    <slot />
  </div>

  <div class={styles.links}>
    {
      allLinks.map((link, index) => (
        <a
          href={link.url}
          target="_blank"
          rel="noopener noreferrer"
          class:list={[styles.linkBadge, { [styles.primary]: index === 0 }]}
        >
          {link.type}
        </a>
      ))
    }
  </div>
</article>
